<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Experiment 6 â€“ Conditional Greetings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <main class="shell">
    <section class="card">
      <header class="card__header">
        <h1 class="card__title">Mood-Based Greeting Console</h1>
        <p class="card__hint">Tell me who you are and how you feel. Iâ€™ll do the rest âœ¨</p>
      </header>

      <form class="mood-form" id="moodForm">
        <div class="field-row">
          <label for="nameInput">Your name</label>
          <input 
            type="text" 
            id="nameInput" 
            name="name" 
            placeholder="Type your name here..." 
            required>
        </div>

        <div class="field-row">
          <label for="moodInput">Your mood</label>
          <select id="moodInput" name="mood" required>
            <option value="">Select how you feel</option>
            <option value="happy">Happy ðŸ˜€</option>
            <option value="tired">Tired ðŸ˜´</option>
            <option value="stressed">Stressed ðŸ˜“</option>
            <option value="excited">Excited ðŸ¤©</option>
          </select>
        </div>

        <button type="submit" class="btn-main">Generate Greeting</button>
      </form>

      <section class="output-zone" aria-live="polite">
        <p id="greetingText" class="greeting greeting--empty">
          Your personalized greeting will appear here.
        </p>
        <p id="timeText" class="time-note"></p>
      </section>
    </section>
  </main>

  <script>
    const moodForm = document.getElementById('moodForm');
    const greetingText = document.getElementById('greetingText');
    const timeText = document.getElementById('timeText');

    function getTimeSlot() {
      const now = new Date();
      const hour = now.getHours();

      if (hour >= 5 && hour < 12) return "morning";
      if (hour >= 12 && hour < 17) return "afternoon";
      if (hour >= 17 && hour < 21) return "evening";
      return "night";
    }

    function buildGreeting(name, mood, timeSlot) {
      const cleanName = name.trim() || "friend";

      let baseGreeting = "";
      if (timeSlot === "morning") {
        baseGreeting = `Good morning, ${cleanName}`;
      } else if (timeSlot === "afternoon") {
        baseGreeting = `Good afternoon, ${cleanName}`;
      } else if (timeSlot === "evening") {
        baseGreeting = `Good evening, ${cleanName}`;
      } else {
        baseGreeting = `Good night, ${cleanName}`;
      }

      let moodLine = "";
      if (mood === "happy") {
        moodLine = "Love that you're feeling happyâ€”keep that energy going!";
      } else if (mood === "tired") {
        moodLine = "Take a deep breath and give yourself a little rest today.";
      } else if (mood === "stressed") {
        moodLine = "Youâ€™ve handled tough days beforeâ€”you can handle this one too.";
      } else if (mood === "excited") {
        moodLine = "Channel that excitement into something amazing!";
      }

      return `${baseGreeting}. ${moodLine}`;
    }

    moodForm.addEventListener('submit', function (event) {
      event.preventDefault();

      const nameValue = document.getElementById('nameInput').value;
      const moodValue = document.getElementById('moodInput').value;
      const currentSlot = getTimeSlot();

      const message = buildGreeting(nameValue, moodValue, currentSlot);

      // Reset classes for mood coloring
      greetingText.classList.remove(
        'greeting--empty',
        'greeting--happy',
        'greeting--tired',
        'greeting--stressed',
        'greeting--excited'
      );

      // Add mood-specific class
      if (moodValue === "happy") {
        greetingText.classList.add('greeting--happy');
      } else if (moodValue === "tired") {
        greetingText.classList.add('greeting--tired');
      } else if (moodValue === "stressed") {
        greetingText.classList.add('greeting--stressed');
      } else if (moodValue === "excited") {
        greetingText.classList.add('greeting--excited');
      }

      // Trigger re-animation (remove, then force reflow, then add)
      greetingText.classList.remove('greeting--visible');
      void greetingText.offsetWidth; // forces reflow
      greetingText.classList.add('greeting--visible');

      greetingText.textContent = message;
      timeText.textContent = `Detected time of day: ${currentSlot.toUpperCase()}`;
    });
  </script>
</body>
</html>
